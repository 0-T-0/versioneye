<div class="boxHeader">
	Dependencies
</div>
<div class="boxContainer" id="dependencies" itemprop="requirements" itemscope="" itemtype="http://schema.org/ItemList">
	<meta name="name" content="Requirements" itemprop="name" />
	<% if @product.prod_type.eql?("Maven2") %>
		<%= render "product_show_dependencies_maven2" %>
	<% else %>
		<%= render "product_show_dependencies_rubygems" %>
	<% end %>
</div>
<div class="boxContainer" >
	<div id="canvas-container"></div>
	<div style="text-align: center; display: none" id="infoBox">
		<h3 style="text-align: center;" >
			<%= @product.name %> has <span style="font-weight: bold;" id="runtime_recursive_number"></span> recursive <%= @product.main_scope %> dependencies
		</h3>
		<a href="/package_visual/<%= @product.to_param%>/version/<%= @product.version_to_url_param %>">
			See visual page
		</a>
	</div>
</div>	

<% if @main_dependencies.count > 3 %>
	<script type="text/javascript">
		jQuery.noConflict();
		var wheel = new MooWheel.Remote(false, document.getElementById("canvas-container"), { 
			url: '/package/<%= @product.to_param%>/version/<%= @product.version_to_url_param %>/circle_dependencies.json',
			width: "562", 
			height: "562",
			infoBox: "infoBox",
			infoNumber: "runtime_recursive_number",
			onItemClick: function(item, event){
				key = item.id; 
				key = key.replace(/\//g, "--");
				key = key.replace(/\./g, "~" );
				version = item.version;
				version = version.replace(/\//g, "--");
				version = version.replace(/\./g, "~" );
				window.location.href = "/package/" + key + "/version/" + version;
			}
		} );
	</script>
<% end %>