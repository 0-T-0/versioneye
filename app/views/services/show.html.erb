
<% if @project %> 
	<div class="content" style="margin-left: 115px;">
		<h2 style="padding-bottom: 10px;">
			<span class=""><%= @project.dep_number %> Dependencies, <span style="color: <%= outdated_color(@project) %>" ><%= @project.out_number %></span> Outdated</span>
		</h2>
		<div class="dependencies" id="dependencies" >
			<% if !@project.fetch_dependencies.nil? %>
				<% @project.dependencies.each do |dep| %>
					<% product = dep.get_product %>
					<div class="dependency" >
						<% if dep.prod_key.nil? %>
							<%= render :partial => "/user/projects/show_unknown_dep",   :locals => {:product => product, :dep => dep} %>
						<% elsif dep.outdated %>
							<%= render :partial => "/user/projects/show_known_out_dep", :locals => {:product => product, :dep => dep} %>
						<% else %>	
							<%= render :partial => "/user/projects/show_known_ok_dep",  :locals => {:product => product, :dep => dep} %>
						<% end %>					
					</div>
				<% end %>
			<% end %>
		</div>
		<div id="canvas-container"></div>
	</div>
<% end %>

<script type="text/javascript">
	function render_wheel(){
		canvas_container = document.getElementById("canvas-container")
	    if (canvas_container){
	    	var wheel = new DependencyWheel.Remote(false, canvas_container, { 
				url: '/service/<%= @project.id%>/dependencies.json',
				width: "562", 
				height: "562",
				infoBox: "infoBox",
				infoNumber: "runtime_recursive_number",
				canvas_id: "canvas",
				canvas_hover_id: "canvas_hover",
				product_key: "<%= @product.to_param%>", 
				product_version: "<%= @product.version_to_url_param%>",
				product_name: "<%= @product.name%>", 
				version: "<%= @product.version%>",
				data_border: 70,
				show_label: false,
				resize: false,
				scope: "<%= @product.main_scope %>",
				container_id: "canvas-container",
				onItemClick: function(item, event){
					key = item.id; 
					key = key.replace(/\//g, "--");
					key = key.replace(/\./g, "~" );
					version = item.version;
					version = version.replace(/\//g, "--");
					version = version.replace(/\./g, "~" );
					window.location.href = "/package/" + key + "/version/" + version;
				}
			} );	
	    }
	}	
</script>