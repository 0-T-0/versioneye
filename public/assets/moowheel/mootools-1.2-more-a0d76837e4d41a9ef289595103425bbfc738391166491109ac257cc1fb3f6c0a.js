//MooTools More, <http://mootools.net/more>. Copyright (c) 2006-2008 Valerio Proietti, <http://mad4milk.net>, MIT Style License.
var Asset=new Hash({javascript:function(t,e){e=$extend({onload:$empty,document:document,check:$lambda(!0)},e);var n=new Element("script",{src:t,type:"text/javascript"}),r=e.onload.bind(n),i=e.check,o=e.document;if(delete e.onload,delete e.check,delete e.document,n.addEvents({load:r,readystatechange:function(){["loaded","complete"].contains(this.readyState)&&r()}}).setProperties(e),Browser.Engine.webkit419)var a=function(){$try(i)&&($clear(a),r())}.periodical(50);return n.inject(o.head)},css:function(t,e){return new Element("link",$merge({rel:"stylesheet",media:"screen",type:"text/css",href:t},e)).inject(document.head)},image:function(t,e){e=$merge({onload:$empty,onabort:$empty,onerror:$empty},e);var n=new Image,r=$(n)||new Element("img");return["load","abort","error"].each(function(t){var i="on"+t,o=e[i];delete e[i],n[i]=function(){n&&(r.parentNode||(r.width=n.width,r.height=n.height),n=n.onload=n.onabort=n.onerror=null,o.delay(1,r,r),r.fireEvent(t,r,1))}}),n.src=r.src=t,n&&n.complete&&n.onload.delay(1),r.setProperties(e)},images:function(t,e){e=$merge({onComplete:$empty,onProgress:$empty},e),t.push||(t=[t]);var n=[],r=0;return t.each(function(i){var o=new Asset.image(i,{onload:function(){e.onProgress.call(this,r,t.indexOf(i)),r++,r==t.length&&e.onComplete()}});n.push(o)}),new Elements(n)}});